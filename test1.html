<!DOCTYPE html>
<html>
<title>Direction Line</title>
<body>
	<canvas id="myCanvas1" width="800" height="600"
		style="border:1px dotted #d3d3d3;">
	</canvas>

	<script>
		function drawLine(x1, y1, x2, y2, length) {
			var angle = Math.abs(Math.atan((x2 - x1) / (y2 - y1))); //倾斜角余角
			var length = length || 30; //箭头斜线长度
			var degree = Math.PI / 6; //箭头倾斜角
			var theta = 0;
			var altha = 0;
			var a1,b1,a2,b2 = 0;
			
			var abs1 = x1 == x2 ? -1 : (x1 - x2)/Math.abs(x1 - x2);
			var abs2 = y1 == y2 ? -1 : (y1 - y2)/Math.abs(y1 - y2);

			theta = angle - degree;
			altha = theta + 2 * degree - Math.PI / 2;

			a1 = x2 + abs1*length * Math.sin(theta);
			b1 = y2 + abs2*length * Math.cos(theta);
			a2 = x2 + abs1*length * Math.cos(altha);
			b2 = y2 - abs2*length * Math.sin(altha);

			ctx.beginPath();
			ctx.moveTo(x1, y1);
			ctx.lineTo(x2, y2);
			ctx.lineTo(a1, b1);
			ctx.stroke();
			ctx.moveTo(x2, y2);
			ctx.lineTo(a2, b2);
			ctx.stroke();
		}
	</script>
	<script>
		var c = document.getElementById("myCanvas1");
		var ctx = c.getContext("2d");

		drawLine(30,30,100,100,20);
		drawLine(200,100,130,30,10);
		drawLine(230,100,300,30,40);
		drawLine(400,30,330,100,50);

		drawLine(30,200,100,230,20);
		drawLine(130,230,200,200,10);
		drawLine(300,230,230,200,40);
		drawLine(400,200,330,230,50);
		
		drawLine(30,330,60,400,20);
		drawLine(130,400,160,330,10);
		drawLine(260,400,230,330,40);
		drawLine(360,330,330,400,50);
		
		drawLine(30,510,100,510,20);
		drawLine(160,540,160,480,10);
		drawLine(260,480,260,540,40);
		drawLine(400,510,330,510,50);
	</script>
</body>
</html>